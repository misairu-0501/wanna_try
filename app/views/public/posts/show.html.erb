<div class = "container">
  <div class="row">
    <div class="col-md-6">
      <h2 class="alert alert-warning mt-3">投稿詳細</h2>
      <table class="table">
        <tr>
          <th>タイトル</th>
          <td><%= @post.title %></td>
        </tr>
        <tr>
          <th>お名前</th>
          <td><%= @post.child.name %></td>
        </tr>
        <tr>
          <th>年齢(写真の時点)</th>
          <td><%= @post.age_calculation %>歳（<%= @post.shooting_date.strftime("%Y/%m/%d") %>時点）</td>
        </tr>
        <tr>
          <th>投稿者</th>
          <td><%= @post.user.name %></td>
        </tr>
        <tr>
          <th>投稿日時</th>
          <td><%= @post.created_at.strftime("%Y/%m/%d %H:%M:%S") %></td>
        </tr>
        <tr>
          <th>公開範囲</th>
          <td><%= Post.public_statuses_i18n[Post.public_statuses.key(@post.public_status)] %></td>
        </tr>
        <tr>
          <th>説明</th>
          <td><%=safe_join(@post.body.split("\n"),tag(:br))%></td>
        </tr>
      </table>

      <% if @post.user == current_user %>
        <%= link_to "編集", edit_post_path(@post), class: "btn btn-main" %>
        <%= link_to "削除", post_path(@post), method: :delete, data: {confirm: "投稿を削除しますか？"}, class: "btn btn-danger" %>
      <% end %>
    </div>
    <div class="col-md-6">
      <div class="mt-3">
        <img><%= image_tag @post.get_post_image, width: "500px", height: "auto" %></img><br>
      </div>
      <!--いいね(非同期通信化)-->
      <span id="favorite_buttons_<%= @post.id %>" >
        <%= render 'public/favorites/favorites', post: @post %>
      </span>
      <span>|</span>
      <!--コメント数(非同期通信化)-->
      <span id="number_of_post_comments">
        <%= render 'public/post_comments/number_of_comments', post: @post %>
      </span>
    </div>
  </div>

  <div class="row">
    <div class="col-md-12">
      <h2 class="mt-3 alert alert-warning">コメント</h2>
      <div id="error">
        <%= render 'layouts/errors', obj: @post_comment %>
      </div>

      <!--コメント一覧(非同期通信化)-->
      <div id="post_comments">
        <%= render 'public/post_comments/index', post: @post %>
      </div>

      <%= form_with model: [@post, @post_comment], local: false do |f| %>
        <%= f.text_area :comment, rows: '5', wrap: "hard", placeholder: "コメントをここに", class: "form-control" %><br>
        <%= f.submit "送信する", class: "btn btn-main"  %>
      <% end %>
    </div>
  </div>
</div>